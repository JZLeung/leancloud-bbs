{"version":3,"sources":["webpack:///./src/views/passport/github.vue?c73e","webpack:///src/views/passport/github.vue","webpack:///./src/views/passport/github.vue?d8d3","webpack:///./src/views/passport/github.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","href","icon","_v","staticRenderFns","githubvue_type_script_lang_js_","data","concat","encodeURIComponent","window","location","haha","mounted","_mounted","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","access_token","res","loginRes","redirect","wrap","_context","prev","next","$route","query","$store","dispatch","$axios","get","catch","sent","user","$cookie","$toast","open","message","type","$router","replace","name","stop","apply","arguments","passport_githubvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"iHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAqBE,YAAA,mCAA6CF,EAAA,KAAUE,YAAA,wCAAAC,OAA2DC,KAAAR,EAAAQ,QAAiBJ,EAAA,UAAeG,OAAOE,KAAA,mBAAwBL,EAAA,QAAAJ,EAAAU,GAAA,yBAC/RC,mFCQAC,GACAC,KAAA,kBAEAL,KAAA,iDAAAM,OAAAC,mBAAAC,OAAAC,SAAAT,OACAU,KAAA,KAEAC,QANA,eAAAC,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAN,mBAAAO,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAOAP,EAAAzB,KAAAiC,OAAAC,MAAAT,cACAA,GAAA,cAAAA,EARA,CAAAK,EAAAE,KAAA,gBASAhC,KAAAmC,OAAAC,SAAA,qBATAN,EAAAE,KAAA,EAUAhC,KAAAqC,OAAAC,IAAA,4CAAAzB,OAAAY,IAAAc,MAAA,yBAVA,UAUAb,EAVAI,EAAAU,MAWAd,EAXA,CAAAI,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAYAZ,OAAAqB,EAAA,KAAArB,CAAAM,GAZA,OAaAC,EAAAP,OAAAqB,EAAA,KAAArB,GACAO,GACAC,EAAAb,OAAA2B,QAAAJ,IAAA,YACAtC,KAAA2C,OAAAC,MACAC,QAAA,MAAAlB,EAAAW,IAAA,YACAQ,KAAA,eAEAlB,EACAb,OAAAC,SAAAT,KAAAqB,EAEA5B,KAAA+C,QAAAC,QAAA,MAGAhD,KAAA+C,QAAAC,SAAAC,KAAA,WA1BAnB,EAAAE,KAAA,iBA8BAhC,KAAA+C,QAAAC,SAAAC,KAAA,WA9BA,QAgCAjD,KAAAmC,OAAAC,SAAA,qBAhCA,yBAAAN,EAAAoB,SAAA1B,EAAAxB,SAAA,yBAAAmB,EAAAgC,MAAAnD,KAAAoD,YAAA,ICTsRC,EAAA,cCOtRC,EAAAlC,OAAAmC,EAAA,KAAAnC,CACAiC,EACAvD,EACAY,GACA,EACA,KACA,KACA,MAIA4C,EAAAE,QAAAC,OAAA,aACAC,EAAA,WAAAJ","file":"js/github.dba2a2a6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"login-page main-body container\"},[_c('a',{staticClass:\"button is-light is-large is-fullwidth\",attrs:{\"href\":_vm.href}},[_c('b-icon',{attrs:{\"icon\":\"github-circle\"}}),_c('span',[_vm._v(\"通过 Github 登录\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nsection.login-page.main-body.container\n    a.button.is-light.is-large.is-fullwidth(:href='href')\n        b-icon(icon='github-circle')\n        span 通过 Github 登录\n</template>\n\n<script>\nimport {githubLogin, isLogin} from '@/api/user'\nexport default {\n    data: () => ({\n        // href: `http://127.0.0.1:7001/github/auth?redirect=${encodeURIComponent(window.location.href)}`,\n        href: `https://blog.leungjz.top/github/auth?redirect=${encodeURIComponent(window.location.href)}`,\n        haha: ''\n    }),\n    async mounted() {\n        const access_token = this.$route.query.access_token\n        if (access_token && access_token !== 'undefined') {\n            this.$store.dispatch('app/setLoading', true)\n            const res = await this.$axios.get(`https://api.github.com/user?access_token=${access_token}`).catch(() => null)\n            if (res) {\n                await githubLogin(res)\n                const loginRes = isLogin()\n                if (loginRes) {\n                    const redirect = window.$cookie.get('redirect')\n                    this.$toast.open({\n                        message: '你好，' + loginRes.get('username'),\n                        type: 'is-success'\n                    })\n                    if (redirect) {\n                        window.location.href = redirect\n                    } else {\n                        this.$router.replace('/')\n                    }\n                } else {\n                    this.$router.replace({name: 'github'})\n                }\n                // console.log(loginRes)\n            } else {\n                this.$router.replace({name: 'github'})\n            }\n            this.$store.dispatch('app/setLoading', false)\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./github.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./github.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./github.vue?vue&type=template&id=5254ef74&lang=pug&\"\nimport script from \"./github.vue?vue&type=script&lang=js&\"\nexport * from \"./github.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"github.vue\"\nexport default component.exports"],"sourceRoot":""}