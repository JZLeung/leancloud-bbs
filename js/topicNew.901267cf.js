(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topicNew"],{"6f97":function(t,e,n){},8041:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={ERROR:"is-danger",SUCCESS:"is-success",NORMAL:""}},b7e4:function(t,e,n){"use strict";var i=n("6f97"),r=n.n(i);r.a},cbc7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-topic-page"},[n("section",[n("h3",{staticClass:"is-3"},[t._v("发表新话题")]),n("b-field",{attrs:{label:"标题",type:t.types.title,message:t.errors.title}},[n("b-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("b-field",{attrs:{label:"内容",type:t.types.content,message:t.errors.content}},[n("b-input",{attrs:{maxlength:"2048",type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),n("b-field",[n("a",{staticClass:"control",attrs:{href:"https://guides.github.com/features/mastering-markdown/"}},[n("small",[t._v("Styling with Markdown is supported")])])]),n("b-field",[n("a",{staticClass:"button is-primary",on:{click:t.submit}},[t._v("提交")])])],1)])},r=[],s=(n("96cf"),n("3040")),o=(n("a481"),n("cadf"),n("551c"),n("097d"),n("0fac")),c=n("c24f"),a=n("8041"),l={data:function(){return{id:"",form:{title:"",content:""},types:{title:"",content:""},errors:{title:"",content:""}}},methods:{check:function(){var t=this.form,e=t.title,n=t.content,i={title:!0,content:!0};return e?(e.length<5||e.length>20)&&(i.title="标题长度需要在 5-20 个字符内"):i.title="请输入标题",n?(n.length<20||n.length>2048)&&(i.content="标题长度需要在 20-2048 个字符内"):i.content="请输入话题内容",i},submit:function(){var t=this,e=this.check();if(!0!==e.title||!0!==e.content)return this.types.title=!0===e.title?a["a"].SUCCESS:a["a"].ERROR,this.types.content=!0===e.content?a["a"].SUCCESS:a["a"].ERROR,this.errors.title=!0===e.title?"":e.title,this.errors.content=!0===e.content?"":e.content,!1;Object(o["d"])(this.form,this.id).then(function(e){console.log(e);var n=e.id;t.$router.replace({name:"topicDetail",params:{id:n}})}).catch(function(t){console.error("postNew error:",t)})}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.params.tid){t.next=7;break}return e=this.$route.params.tid,t.next=4,Object(o["a"])(e,!1);case 4:n=t.sent,i=Object(c["c"])(),n.uid!==i.id?(this.$toast.open({message:"无权访问",type:"is-danger"}),this.$router.replace({name:"topicDetail",params:{id:e}})):(this.form.content=n.content,this.form.title=n.title,this.id=e);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},u=l,f=(n("b7e4"),n("2877")),p=Object(f["a"])(u,i,r,!1,null,null,null);p.options.__file="new.vue";e["default"]=p.exports}}]);
//# sourceMappingURL=topicNew.901267cf.js.map